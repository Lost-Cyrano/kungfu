<!DOCTYPE html>
<html>
<head>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; height: 100vh; overflow: hidden; background: #f0f0f0; }
        .container { height: 100vh; overflow-y: auto; padding: 0; }
        .category { margin-bottom: 30px; }
        .category-separator { height: 2px; background: #4285f4; margin: 0 20px 15px; }
        .athlete-row { 
            display: flex; 
            align-items: center; 
            padding: 15px 20px; 
            background: white; 
            margin: 0 20px 1px; 
            border-bottom: 1px solid #eee;
        }
        .athlete-name { flex: 1; font-size: 16px; }
        .notes-input { 
            width: 150px; 
            padding: 8px 10px; 
            border: 1px solid #ddd; 
            border-radius: 4px; 
            font-size: 14px;
            margin-left: 10px;
        }
        .notes-input:focus { 
            outline: none; 
            border-color: #4285f4; 
            box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.2);
        }
    </style>
</head>
<body>
    <div class="container" id="container"></div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script>
        const firebaseConfig = {
            databaseURL: "https://kungfusete-default-rtdb.europe-west1.firebasedatabase.app/"
        };
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        function renderData(data) {
            const container = document.getElementById('container');
            container.innerHTML = '';
            
            if (!data) return;
            
            Object.keys(data).forEach(catKey => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'category';
                
                const separator = document.createElement('div');
                separator.className = 'category-separator';
                categoryDiv.appendChild(separator);
                
                Object.keys(data[catKey]).forEach((athleteKey, index) => {
                    const athleteName = data[catKey][athleteKey];
                    
                    const row = document.createElement('div');
                    row.className = 'athlete-row';
                    
                    const nameSpan = document.createElement('span');
                    nameSpan.className = 'athlete-name';
                    nameSpan.textContent = athleteName;
                    
                    const input = document.createElement('input');
                    input.type = 'text';
                    input.className = 'notes-input';
                    input.placeholder = 'Notes...';
                    
                    const notesKey = `${catKey}_${athleteKey}`;
                    const notesRef = database.ref(`notes/${notesKey}`);
                    
                    notesRef.on('value', (snapshot) => {
                        input.value = snapshot.val() || '';
                    });
                    
                    input.addEventListener('input', () => {
                        notesRef.set(input.value);
                    });
                    
                    row.appendChild(nameSpan);
                    row.appendChild(input);
                    categoryDiv.appendChild(row);
                });
                
                container.appendChild(categoryDiv);
            });
        }

        database.ref('/').on('value', (snapshot) => {
            renderData(snapshot.val());
        });
    </script>
</body>
</html>
